<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../ll-theme/ll-theme.html">
<link rel="import" href="./ll-definition-list.html">

An element providing the view for property information such as property name, address, description, etc.

<!--
Example:

    <ll-property-information></ll-property-information>

@demo
-->
<dom-module id="ll-property-information-view">

  <style>
    :host {
      display: block;
      box-sizing: border-box;
    }

    .entypo {
      font-size: 3em;
      vertical-align: middle;
    }

    .entypo.check {
      color: yellowgreen;
    }

    .entypo.cross {
      color: red;
    }

  </style>

  <template>
    <div>
      <ll-definition-list title="PROPERTY NAME:">
        <p>{{property.name}}</p>
      </ll-definition-list>

      <ll-definition-list title="ADDRESS:">
        <address>
          <div>{{property.address.address1}}</div>
          <div>{{property.address.address2}}</div>
          <div>{{_locale}}</div>
        </address>
      </ll-definition-list>

      <ll-definition-list title="DESCRIPTION">
        <p>{{property.description}}</p>
      </ll-definition-list>

      <ll-definition-list title="BEDROOMS:">
        <p>{{property.bedroomCount}}</p>
      </ll-definition-list>

      <ll-definition-list title="TOTAL BATHROOMS:">
        <p>{{property.bathroomCount}}</p>
      </ll-definition-list>

      <ll-definition-list title="FULL BATHROOMS:">
        <p>{{property.fullBathrooms}}</p>
      </ll-definition-list>

      <ll-definition-list title="3/4 BATHROOMS:">
        <p>{{property.threeQuarterBathrooms}}</p>
      </ll-definition-list>

      <ll-definition-list title="1/2 BATHROOMS:">
        <p>{{property.halfBathrooms}}</p>
      </ll-definition-list>

      <ll-definition-list title="IS BOOKING AVAILABLE:">
        <p>
          <template is="dom-if" if="{{property.isBookingAvailable}}" restamp>
            <span class="entypo check"></span>
          </template>

          <template is="dom-if" if="{{!property.isBookingAvailable}}" restamp>
            <span class="entypo cross"></span>
          </template>
        </p>
      </ll-definition-list>

      <ll-definition-list title="CATEGORY:">
        <p>{{property.buildingCategory}}</p>
      </ll-definition-list>

      <ll-definition-list title="TYPE:">
        <p>{{property.buildingType}}</p>
      </ll-definition-list>

      <ll-definition-list title="LOCATION:">
        <p>
          <span>{{property.geoLocation.latitude}}</span> lat.
          <span>{{property.geoLocation.longitude}}</span> long.
        </p>
      </ll-definition-list>

      <ll-definition-list title="OCCUPANCY:">
        <p>{{property.occupancy}}</p>
      </ll-definition-list>

      <ll-definition-list title="AMENITIES:">
        <ul class="list-inline">
          <template is="dom-repeat" items="{{property.amenities}}">
            <li>{{item}}</li>
          </template>
        </ul>
      </ll-definition-list>

      <ll-definition-list title="CURRENCY:">
        <p>{{property.currencyCode}}</p>
      </ll-definition-list>

    </div>

    <hr/>

    <select>
      <option value="">More Actions</option>
    </select>

    <div class="actions pull-right">
      <button type="button" class="btn btn-default" on-tap="_backToProperties">Back to properties <span class="entypo circled-left"></span></button>
      <button type="button" class="btn btn-primary" on-tap="_editProperty">Edit information <span class="entypo pencil"></span></button>
      <button type="button" class="btn btn-primary" on-tap="_createProperty">Create new property  <span class="entypo circled-right"></span></button>
    </div>

  </template>

</dom-module>

<script>

  LLPropertyInformationView = Polymer({

    is: 'll-property-information-view',

    factoryImpl: function(property) {
      if(!property) {
        throw new Error('Must supply a property');
      }
      this.property = property;
    },

    properties: {

      /**
       * A property object as defined by the LeisureLink API for rental units.
       * @type {Object}
       * @property {String} name
       * @property {Boolean} isAvailableForBooking
       * @property {String} buildingCategory
       * @property {String} buildingType
       * @property {Object} geoLocation
       * @property {Number} geoLocation.latitude
       * @property {Number} geoLocation.longitude
       * @property {Number} bedroomCount
       * @property {Number} bathroomCount
       * @property {Number} fullBathrooms
       * @property {Number} threeQuarterBathrooms
       * @property {Number} halfBathrooms
       * @property {Number} occupancy
       * @property {String} description
       * @property {Array.<String>} amenities
       * @property {Object} address
       * @property {String} address.address1
       * @property {String} address.address2
       * @property {String} address.city
       * @property {String} address.stateCode
       * @property {String} address.postalCode
       * @property {String} address.countryCode
       * @property {String} currencyCode
       */
      property: {
        type: Object,
        value: function() {
          return {};
        }
      },

      /**
       * Private helper property for concatenating properties of the address into a single string value
       * @readonly
       * @private
       */
      _locale: {
        type: String,
        computed: '_computeLocale(property.address)'
      }
    },

    // Element Lifecycle

    // Element Behavior

    _backToProperties: function() {
      this.fire('ll-property-information-view-back-to-properties');
    },

    _editProperty: function() {
      this.fire('ll-property-information-view-edit-property');
    },

    _createProperty: function() {
      this.fire('ll-property-information-view-create-property');
    },

    _computeLocale: function(address) {
      if(!address) return '';
      return (address.city + ' ' + address.stateCode + ' ' + address.postalCode);
    }

  });

</script>
