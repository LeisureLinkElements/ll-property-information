<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../ll-theme/ll-theme.html">
<link rel="import" href="ll-property-information-view.html">
<link rel="import" href="ll-property-information-edit.html">

The containing component for viewing and editing property information

<!--
Example

    <ll-property-information></ll-property-information>

@demo
-->

<dom-module id="ll-property-information">

    <style>
    </style>

    <template>

        <template is="dom-if" if="{{_inViewMode}}" restamp>
            <ll-property-information-view property="{{property}}"></ll-property-information-view>
        </template>

        <template is="dom-if" id="view-mode" if="{{_inEditMode}}" restamp>
            <ll-property-information-edit property="{{property}}" is-edit></ll-property-information-edit>
        </template>

        <template is="dom-if" id="create-mode" if="{{_inCreateMode}}" restamp>
          <ll-property-information-edit></ll-property-information-edit>
        </template>
    </template>

    <script>
        var testProperty = {
            name: '7858 Aster Lane',
            isBookingAvailable: true,
            buildingCategory: 'condo',
            buildingType: 'townhome',
            geoLocation: {
                latitude: 49.235,
                longitude: 23.246
            },
            bedroomCount: 5,
            bathroomCount: 5,
            fullBathrooms: 3,
            threeQuarterBathrooms: 0,
            halfBathrooms: 2,
            occupancy: 12,
            description: 'This should be a long description but nah',
            amenities: ['fireplace', 'jacuzzi', 'steam shower'],
            address: {
                address1: '7857 Aster Lane',
                address2: '',
                city: 'Park City',
                stateCode: 'UT',
                postalCode: '84060',
                countyCode: 'US'
            },
            currencyCode: 'USD'
        };

        Polymer({
            is: 'll-property-information',

            listeners: {
                'll-property-information-view-edit-property': '_editProperty',
                'll-property-information-view-create-property': '_createProperty',
                'll-property-information-edit-view-property': '_viewInformation',
                'll-property-information-edit-create-property': '_createProperty',
                'll-property-information-edit-post-edit': '_postEdit',
                'll-property-information-edit-post-create': '_postCreate'
            },

            properties: {
                /**
                 *
                 */
                property: {
                    type: Object,
                    value: function() {
                        return testProperty;
                    }
                },
                /**
                 * The property id of an existing property for editing and viewing
                 */
                propertyId: {
                    type: String,
                    value: ''
                },
                _editMode: {
                    type: Boolean,
                    value: false
                },
                _createMode: {
                    type: Boolean,
                    value: false
                },
                _inEditMode: {
                    type: Boolean,
                    computed: '_isInEditMode(_editMode, _createMode)'
                },
                _inViewMode: {
                    type: Boolean,
                    computed: '_isInViewMode(_editMode, _createMode)'
                },
                _inCreateMode: {
                    type: Boolean,
                    computed: '_isInCreateMode(_editMode, _createMode)'
                }
            },

            _viewInformation: function() {
                this._editMode = this._createMode = false;
            },

            _editProperty: function() {
                this._editMode = true;
                this._createMode = false;
            },

            _postEdit: function(e) {
              console.log(e);
            },

            _createProperty: function() {
                this._editMode = false;
                this._createMode = true;
            },

            _postCreate: function(e) {
                console.log(e);
            },

            _isInEditMode: function(editMode, createMode) {
                return editMode && !createMode;
            },

            _isInViewMode: function(editMode, createMode) {
                return !editMode && !createMode;
            },

            _isInCreateMode: function(editMode, createMode) {
                return !editMode && createMode;
            }
        });
    </script>
</dom-module>
