<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">

    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../web-component-tester/browser.js"></script>

    <link rel="import" href="../ll-property-information-view.html">

  </head>
  <body>

  <script>
    var property = {
      "pmcId": "N19R90bi",
      "unitId": "Ekf4jA-i",
      "name": "Tomcat way House",
      "description": "sdfsfsfdsdf",
      "unitTypeId": null,
      "location": {
        "address": "sdlfkjsdklfj",
        "address2": "lkjsdfkjsdflkj",
        "city": "Park City",
        "subdivision": "UT",
        "postal": "84060",
        "country": "US"
      },
      "ratePlans": [
        {
          "ratePlanId": "41lcC50Wo",
          "name": "Rack Rate",
          "default": true,
          "createdAt": "2015-08-10T18:21:45.796Z",
          "pmcId": "N19R90bi"
        }
      ],
      "createdAt": "2015-08-10T18:23:13.688Z"
    };

    var myEl = new LLPropertyInformationView(property);

    describe('ll-property-information-view', function() {

      it('should compute locale', function() {
        expect(myEl._locale).to.eql('Park City UT 84060');
      });

      it('should return empty string when address is not supplied to compute locale', function() {
        expect(myEl._computeLocale()).to.eql('');
      });

      it('should fire an event when edit button is clicked', function(done) {
        myEl.addEventListener('ll-property-information-view-edit-property', function(event) {
          expect(event).to.be.ok;
          done();
        });

        myEl._editProperty();
      });

      it('should fire an event when create button is clicked', function(done) {
        myEl.addEventListener('ll-property-information-view-create-property', function(event) {
          expect(event).to.be.ok;
          done();
        });

        myEl._createProperty();
      });

      it('should fire an event when back to properties button is clicked', function(done) {
        myEl.addEventListener('ll-property-information-view-back-to-properties', function(event) {
          expect(event).to.be.ok;
          done();
        });

        myEl._backToProperties();
      });

      it('should throw an error when constructing without a property', function() {
        expect(function() {
          new LLPropertyInformationView();
        }).to.throw('Must supply a property');
      });

    });
  </script>

  </body>
</html>
